# crop-weed-segmentation

## Configファイルによる実験設定
実験の設定は、`config.yml`を編集することで変えることができる。主な設定項目はconfig.ymlにコメントとして残しているが、わかりづらいものだけここで説明。
* modeldataset_type: 使用するモデルのタイプを指定。それぞれの詳細設定は、cnnならcnn_setting、patch2dならpatch2d_settingなどで管理している
    * cnn: CNN系統のモデル
    * transformer: Transformer系統のモデル
    * patch-d: 画像を小さく分割して、セグメンテーションをするタイプのモデル
* task: セグメンテーションにおいて、どのクラスをどのラベル値に割り当てるかを決定するパラメータ
    * plant: [0, 1]の2クラス分類。2, 3, 4などの1以上のラベルはすべて1として扱われる
    * crop: [0, 1]の2クラス分類。1以外のラベルがすべて0として扱われる
    * 3_classes: [0, 1, 2]の3クラス分類。3, 4などの2以上のラベルはすべて2として扱われる
    * 5_classes: [0, 1, 2, 3, 4]の5クラス分類

## モデルの学習
```
python train.py
```
学習を始めると、`mlruns/` というディレクトリが作成される。
ここには、MLFlowによる実験の単位`run`が複数格納される。

## 実験データの見方
MLflowのダッシュボードを使用するには、以下のコマンドを実行`mlruns/`ディレクトリの親ディレクトリ（つまり本リポジトリのルートディレクトリ）で以下のコマンドを実行。
```
mlflow ui --port 5000
```
その後、`http://127.0.0.1:5000`にアクセスすると結果を見ることができる。